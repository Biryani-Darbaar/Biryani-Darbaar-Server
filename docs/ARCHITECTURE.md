# Architecture Diagram

## ğŸ“Š High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT APPLICATIONS                      â”‚
â”‚         (Web App, Mobile App, Admin Dashboard, etc.)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚ HTTP/HTTPS
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EXPRESS.JS SERVER                           â”‚
â”‚                         (app.js)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Middleware Layer                                               â”‚
â”‚  â”œâ”€ CORS                                                        â”‚
â”‚  â”œâ”€ Body Parser                                                 â”‚
â”‚  â”œâ”€ Morgan Logger                                               â”‚
â”‚  â”œâ”€ Session Management                                          â”‚
â”‚  â””â”€ Cache Controller                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ROUTES LAYER                              â”‚
â”‚                      (routes/*.js)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Auth   â”‚  â”‚  Dishes  â”‚  â”‚  Orders  â”‚  â”‚   Cart   â”‚       â”‚
â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â”‚       â”‚             â”‚             â”‚             â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Category â”‚  â”‚ Location â”‚  â”‚  Promo   â”‚  â”‚ Payment  â”‚       â”‚
â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚
â”‚       â”‚             â”‚             â”‚             â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Reward  â”‚  â”‚ MiniGame â”‚  â”‚GoldPrice â”‚  â”‚  Notify  â”‚       â”‚
â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚  â”‚  Routes  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CONTROLLERS LAYER                            â”‚
â”‚                   (controllers/*.js)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic:                                                â”‚
â”‚  â€¢ Data validation                                              â”‚
â”‚  â€¢ Business rules enforcement                                   â”‚
â”‚  â€¢ Orchestrating operations                                     â”‚
â”‚  â€¢ Calling utilities and services                               â”‚
â”‚  â€¢ Response formatting                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚             â”‚             â”‚
                    â–¼             â–¼             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   UTILITIES   â”‚  â”‚  LIBRARIES   â”‚  â”‚    CONFIG    â”‚
        â”‚  (utils/*.js) â”‚  â”‚ (lib/*.js)   â”‚  â”‚(config/*.js) â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚â€¢ Calculationsâ”‚  â”‚â€¢ Notificationâ”‚  â”‚â€¢ Firebase    â”‚
        â”‚â€¢ Storage     â”‚  â”‚  Service     â”‚  â”‚â€¢ Stripe      â”‚
        â”‚â€¢ Session     â”‚  â”‚â€¢ Other Logic â”‚  â”‚â€¢ Pushy       â”‚
        â”‚â€¢ Response    â”‚  â”‚              â”‚  â”‚â€¢ Multer      â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                 â”‚                 â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL SERVICES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Firebase   â”‚  â”‚    Stripe    â”‚  â”‚    Pushy     â”‚         â”‚
â”‚  â”‚  Firestore   â”‚  â”‚   Payments   â”‚  â”‚   Push       â”‚         â”‚
â”‚  â”‚   Storage    â”‚  â”‚              â”‚  â”‚ Notificationsâ”‚         â”‚
â”‚  â”‚     Auth     â”‚  â”‚              â”‚  â”‚              â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Request Flow

```
1. Client Request
   â”‚
   â”œâ”€â”€> 2. Express Middleware
   â”‚       â”œâ”€ CORS Check
   â”‚       â”œâ”€ Body Parser
   â”‚       â”œâ”€ Logger
   â”‚       â””â”€ Session
   â”‚
   â”œâ”€â”€> 3. Route Handler
   â”‚       â””â”€ Maps URL to Controller
   â”‚
   â”œâ”€â”€> 4. Controller
   â”‚       â”œâ”€ Validates Input
   â”‚       â”œâ”€ Applies Business Logic
   â”‚       â”œâ”€ Calls Utilities/Services
   â”‚       â””â”€ Calls Firebase/External APIs
   â”‚
   â”œâ”€â”€> 5. Response
   â”‚       â”œâ”€ Format Data
   â”‚       â”œâ”€ Log Result
   â”‚       â””â”€ Send to Client
   â”‚
   â””â”€â”€> 6. Client Receives Response
```

## ğŸ“¦ Module Dependencies

```
app.js
  â”‚
  â”œâ”€> config/
  â”‚     â”œâ”€> firebase.config.js
  â”‚     â”œâ”€> stripe.config.js
  â”‚     â”œâ”€> pushy.config.js
  â”‚     â””â”€> multer.config.js
  â”‚
  â”œâ”€> middlewares/
  â”‚     â”œâ”€> logger.middleware.js
  â”‚     â”œâ”€> cache.middleware.js
  â”‚     â””â”€> validation.middleware.js
  â”‚
  â”œâ”€> routes/
  â”‚     â”œâ”€> index.js (Route Manager)
  â”‚     â”‚     â”‚
  â”‚     â”‚     â”œâ”€> auth.routes.js â”€â”€â”€â”€â”€â”€â”
  â”‚     â”‚     â”œâ”€> dish.routes.js â”€â”€â”€â”€â”€â”€â”¤
  â”‚     â”‚     â”œâ”€> order.routes.js â”€â”€â”€â”€â”€â”¤
  â”‚     â”‚     â”œâ”€> cart.routes.js â”€â”€â”€â”€â”€â”€â”¤
  â”‚     â”‚     â””â”€> ... (other routes) â”€â”€â”¤
  â”‚     â”‚                               â”‚
  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> controllers/
  â”‚                                       â”œâ”€> auth.controller.js
  â”‚                                       â”œâ”€> dish.controller.js
  â”‚                                       â”œâ”€> order.controller.js
  â”‚                                       â””â”€> ... (other controllers)
  â”‚                                              â”‚
  â”‚                                              â”œâ”€> utils/
  â”‚                                              â”œâ”€> lib/
  â”‚                                              â””â”€> config/
  â”‚
  â””â”€> constants/
        â””â”€> index.js
```

## ğŸ—‚ï¸ File Relationships

```
dish.controller.js depends on:
  â”œâ”€ config/firebase.config.js (db, bucket)
  â”œâ”€ constants/index.js (COLLECTION_NAMES)
  â”œâ”€ utils/storage.util.js (uploadFile, deleteFile)
  â”œâ”€ utils/response.util.js (errorResponse, successResponse)
  â””â”€ utils/session.util.js (getUserId)

order.controller.js depends on:
  â”œâ”€ config/firebase.config.js (db)
  â”œâ”€ constants/index.js (COLLECTION_NAMES)
  â”œâ”€ utils/session.util.js (getUserId)
  â”œâ”€ utils/calculations.util.js (calculateRewards)
  â””â”€ utils/response.util.js (errorResponse, successResponse)

notification.controller.js depends on:
  â”œâ”€ config/firebase.config.js (admin, db)
  â”œâ”€ constants/index.js (COLLECTION_NAMES)
  â”œâ”€ lib/notification.lib.js (sendPushNotifications)
  â””â”€ utils/response.util.js (errorResponse, successResponse)
```

## ğŸ” Data Flow: User Authentication

```
Client
  â”‚
  â”‚ POST /login { idToken }
  â”‚
  â–¼
Express Middleware
  â”‚
  â–¼
auth.routes.js
  â”‚
  â–¼
auth.controller.login()
  â”‚
  â”œâ”€> admin.auth().verifyIdToken(idToken)
  â”‚     â”‚
  â”‚     â”œâ”€> Firebase Auth API
  â”‚     â”‚     â””â”€> Returns decodedToken
  â”‚     â”‚
  â”‚     â””â”€> session.util.js
  â”‚           â””â”€> setUserId(decodedToken.uid)
  â”‚
  â””â”€> response.util.js
        â””â”€> successResponse(200, { sessionId, userId })
              â”‚
              â–¼
            Client Receives Success Response
```

## ğŸ›’ Data Flow: Adding Dish to Cart

```
Client
  â”‚
  â”‚ POST /cart { dishId, quantity, ... }
  â”‚
  â–¼
Express Middleware
  â”‚
  â–¼
cart.routes.js
  â”‚
  â–¼
cart.controller.addToCart()
  â”‚
  â”œâ”€> session.util.getUserId(req)
  â”‚     â””â”€> Returns userId
  â”‚
  â”œâ”€> Firebase Firestore
  â”‚     â”œâ”€> Check if item exists
  â”‚     â”œâ”€> Update quantity OR
  â”‚     â””â”€> Create new cart item
  â”‚
  â””â”€> response.util.successResponse()
        â”‚
        â–¼
      Client Receives Success Response
```

## ğŸ“¦ Data Flow: Creating Order

```
Client
  â”‚
  â”‚ POST /orders { items, totalPrice, ... }
  â”‚
  â–¼
Express Middleware
  â”‚
  â–¼
order.routes.js
  â”‚
  â–¼
order.controller.createOrder()
  â”‚
  â”œâ”€> session.util.getUserId(req)
  â”‚     â””â”€> Returns userId
  â”‚
  â”œâ”€> Firebase Firestore
  â”‚     â”œâ”€> Get user data
  â”‚     â”œâ”€> Create order in user's collection
  â”‚     â”œâ”€> Create order in global collection
  â”‚     â”œâ”€> Get reward settings
  â”‚     â””â”€> Calculate rewards
  â”‚
  â”œâ”€> calculations.util.calculateRewards()
  â”‚     â””â”€> Returns rewardsEarned
  â”‚
  â”œâ”€> Firebase Firestore
  â”‚     â””â”€> Update user rewards
  â”‚
  â””â”€> response.util.successResponse()
        â”‚
        â–¼
      Client Receives { orderId, rewardsEarned, ... }
```

## ğŸ¨ Separation of Concerns

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRESENTATION LAYER                      â”‚
â”‚                         (Routes)                             â”‚
â”‚  â€¢ Define endpoints                                          â”‚
â”‚  â€¢ Map HTTP methods                                          â”‚
â”‚  â€¢ Apply middleware                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BUSINESS LAYER                          â”‚
â”‚                      (Controllers)                           â”‚
â”‚  â€¢ Validate input                                            â”‚
â”‚  â€¢ Apply business rules                                      â”‚
â”‚  â€¢ Orchestrate operations                                    â”‚
â”‚  â€¢ Handle errors                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SERVICE LAYER                           â”‚
â”‚                   (Utils & Libraries)                        â”‚
â”‚  â€¢ Reusable functions                                        â”‚
â”‚  â€¢ Complex calculations                                      â”‚
â”‚  â€¢ External API calls                                        â”‚
â”‚  â€¢ File operations                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA LAYER                             â”‚
â”‚              (Firebase Firestore & Storage)                  â”‚
â”‚  â€¢ Data persistence                                          â”‚
â”‚  â€¢ File storage                                              â”‚
â”‚  â€¢ Authentication                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Principles Applied

1. **Single Responsibility**: Each file has one job
2. **DRY (Don't Repeat Yourself)**: Utilities for common tasks
3. **Separation of Concerns**: Routes â†’ Controllers â†’ Services â†’ Data
4. **Dependency Injection**: Configs are imported, not hardcoded
5. **Modularity**: Each module can work independently

---

This architecture makes the codebase:

- âœ… Easy to understand
- âœ… Easy to test
- âœ… Easy to maintain
- âœ… Easy to scale
- âœ… Easy to extend
